
# Каталог fixtures

Тестовые данные, макеты, настройки, используемые при выполнении автоматических тестов\сценариев поведения

- `allow.values.predefined.cicd.var.json`, разрешенные значения предопределенных переменных CI\CD:

| Ключ               | Описание                                                                             | Тип    |
|--------------------|--------------------------------------------------------------------------------------|--------|
| VCI_VERBOSE        | Признак, что этот шаг испольуется в сценарии отладки                                 | Булево |
| CI_PIPELINE_SOURCE | Список источников запуска pipeline которые доступны шагу                             | Строка |
| CI_COMMIT_TAG      | Регулярное выражение, если тег коммита совпадает с выражением, то шаг будет добавлен | Строка |
| DEPLOY             | Признак, что это шаг используется в сценарии деплоя                                  | Булево |
|                    |                                                                                      |        |

Доступные сценарии:

| Имя               | Шаги                                            | Описание                                                                                                                                                                                                                                               |
|-------------------|-------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Parent pipeline   | .pre - templating - perfomance - child pipeline | Хранится в корне каждого из проектов, генерирует нисходящий пайплайн с динамическим набором шагов                                                                                                                                                      |
| Общий             | common - .pre - * - .post                       | Набор общих шагов, которые выполняются для всех нисходящих пайплайнов                                                                                                                                                                                  |
| Отладка           | common - .pre - verbose - * - .post             | Добавляется шаг с отладкой, который выводит значение переменных окружения (внутри нисходящего пайплайна, так как они могут отличаться от вышестоящего пайплайна). Включить с помощью переменной окружения `VCI_VERBOSE` или командой `vci -v generate` |
| Запуск по графику | common - .pre - schedules - .post               | Запуск по графику выгрузки из хранилища 1С в git репозиторий                                                                                                                                                                                           |
| Основной          | common - .pre - build - test - report - .post   | Собрать проект, собрать внешние файлы, создать эталонную ИБ, запустить синтаксические, дымовые, сценарные и модульные тесты, передать в sonarqube, сформировать allure, оформить gitlab pages, заполнить changelog.md                                  |
| Деплой            | common - .pre - deploy.env.*.json - .post       | Прочитать параметры окружения из корня Вашего проекта, сформировать по ним задания на блокировку пользователей, обновление ИБ и запуск пост-обновления                                                                                                 |
|                   |                                                 |                                                                                                                                                                                                                                                        |

- `env.dev.json`, используется для `ТестДолжен_ПроверитьЗапускСкрипта_ПриветМир_СПараметром`
